# Pintless
[![CodeFactor](https://www.codefactor.io/repository/github/stephenwattam/pintless/badge)](https://www.codefactor.io/repository/github/stephenwattam/pintless)
![Linting and building](https://github.com/StephenWattam/pintless/actions/workflows/python-package.yml/badge.svg)
<!-- Pytest Coverage Comment:Begin -->
<a href="https://github.com/StephenWattam/pintless/blob/main/README.md"><img alt="Coverage" src="https://img.shields.io/badge/Coverage-83%25-green.svg" /></a><details><summary>Coverage Report </summary><table><tr><th>File</th><th>Stmts</th><th>Miss</th><th>Cover</th><th>Missing</th></tr><tbody><tr><td colspan="5"><b>pintless</b></td></tr><tr><td>&nbsp; &nbsp;<a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py">quantity.py</a></td><td>148</td><td>49</td><td>67%</td><td><a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L30">30</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L34">34</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L49">49</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L68">68</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L87-L95">87&ndash;95</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L101">101</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L121">121</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L129">129</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L147-L160">147&ndash;160</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L169">169</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L173">173</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L177">177</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L214">214</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L223">223</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L231-L243">231&ndash;243</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L249">249</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L252-L256">252&ndash;256</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L273">273</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L276">276</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L279">279</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L282">282</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L285">285</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L289">289</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L292">292</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L295">295</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L301">301</a></td></tr><tr><td>&nbsp; &nbsp;<a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py">registry.py</a></td><td>154</td><td>4</td><td>97%</td><td><a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L93">93</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L110">110</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L166">166</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L189">189</a></td></tr><tr><td>&nbsp; &nbsp;<a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py">unit.py</a></td><td>165</td><td>27</td><td>84%</td><td><a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L43">43</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L50">50</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L53">53</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L56">56</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L120">120</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L128">128</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L238-L271">238&ndash;271</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L276">276</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L293">293</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L335">335</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L348">348</a></td></tr><tr><td><b>TOTAL</b></td><td><b>473</b></td><td><b>80</b></td><td><b>83%</b></td><td>&nbsp;</td></tr></tbody></table></details>
<!-- Pytest Coverage Comment:End -->

The unit library [pint](https://github.com/hgrecco/pint) is fantastic.  It removes a whole class of bugs from common data science workloads, and provides good tools for humans to process numbers.  But it's very slow, and provides vast swaths of functionality that I don't need.

This library is like pint, but _less_ --- it lets you use units without pain, but aims to be performant and small-in-memory.  It's designed as a drop-in replacement to pint for those of us who don't use most of pint's features.

Choice of features is based on my personal experience in projects.  From this I've developed some principles that will be followed here to prevent creep/bloat:

Things this doesn't support:

 - unit groups: use a new definition file if you want this.
 - Units that don't scale from 0, e.g. degrees C and F.
 - LaTeX output
 - Translation to other languages --- want different units?  Use a different definition file
 - Simplification of units: algebraic simplifications are necessary, but choosing 'sensible' units for humans is beyond the scope of this lib
 - Scientific notation and other non-unit number representation problems.  This is a unit library and only deals with numbers because it has to to adjust the values therein.

Design Principles

 - Fast is more important than small or simple
 - Precompute where possible
 - Having principles usually leads you to design for them rather than reality
 - Don't incur performance costs for obscure units: allow users to specify minimal sets of things for common workflows
 - Don't incur performance costs for nicer APIs (e.g. string processing, output to notebooks, etc)
 - Quantity and Unit classes are numbers and should be as transparent/minimal as possible, holding as few external references as possible, and should be serialisable with as little pain as possible


## Road Map

 - Unified unit types (currently there are three);
 - A parser for text representations of units
 - Much better test pack
 - Benchmarks
 - Compilation to C


## Benchmarking
A small benchmark script is in the root of this repository, `benchmark.py`.  To run (and visualise the output using [snakeviz](https://jiffyclub.github.io/snakeviz/):

    python -m cProfile -o both.prof benchmark.py
    snakeviz both.prof

The benchmark is dead simple, and prioritises repeated simple actions (as per a lot of processing workloads).

Operators to support

    op1 = (operator.neg, operator.truth)
    op2_cmp = (operator.eq,)  # operator.lt)
    op2_math = (operator.add, operator.sub, operator.mul, operator.truediv)



Base units

    #### BASE UNITS ####

    meter = [length] = m = metre
    second = [time] = s = sec
    ampere = [current] = A = amp
    candela = [luminosity] = cd = candle
    gram = [mass] = g
    mole = [substance] = mol
    kelvin = [temperature]; offset: 0 = K = degK = Â°K = degree_Kelvin = degreeK  # older names supported for compatibility
    radian = [] = rad
    bit = []
    count = []


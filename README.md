# Pintless
<img align="right" width="100" height="100" src="https://raw.githubusercontent.com/StephenWattam/pintless/main/pintless-dalle.jpg" alt="Pintless, the unit library for people who don't want pint"/>

[![DeepSource](https://deepsource.io/gh/StephenWattam/pintless.svg/?label=active+issues&show_trend=true&token=wd9lW1wQHaG9lCc3Jrp-FKVu)](https://deepsource.io/gh/StephenWattam/pintless/?ref=repository-badge)
[![CodeFactor](https://www.codefactor.io/repository/github/stephenwattam/pintless/badge)](https://www.codefactor.io/repository/github/stephenwattam/pintless)
![Linting and building](https://github.com/StephenWattam/pintless/actions/workflows/python-package.yml/badge.svg)
<!-- Pytest Coverage Comment:Begin -->
<a href="https://github.com/StephenWattam/pintless/blob/main/README.md"><img alt="Coverage" src="https://img.shields.io/badge/Coverage-86%25-green.svg" /></a><details><summary>Coverage Report </summary><table><tr><th>File</th><th>Stmts</th><th>Miss</th><th>Cover</th><th>Missing</th></tr><tbody><tr><td colspan="5"><b>pintless</b></td></tr><tr><td>&nbsp; &nbsp;<a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py">quantity.py</a></td><td>148</td><td>49</td><td>67%</td><td><a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L32">32</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L36">36</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L51">51</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L71">71</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L92-L100">92&ndash;100</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L106">106</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L130">130</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L138">138</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L156-L169">156&ndash;169</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L178">178</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L182">182</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L186">186</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L232">232</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L248">248</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L257-L269">257&ndash;269</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L275">275</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L278-L282">278&ndash;282</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L286">286</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L289">289</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L292">292</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L295">295</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L298">298</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L302">302</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L305">305</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L308">308</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/quantity.py#L314">314</a></td></tr><tr><td>&nbsp; &nbsp;<a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py">registry.py</a></td><td>154</td><td>5</td><td>97%</td><td><a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L93">93</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L110">110</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L171">171</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L194">194</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/registry.py#L274">274</a></td></tr><tr><td>&nbsp; &nbsp;<a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py">unit.py</a></td><td>147</td><td>10</td><td>93%</td><td><a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L35">35</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L44">44</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L47">47</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L50">50</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L116">116</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L124">124</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L233">233</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L250">250</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L290">290</a>, <a href="https://github.com/StephenWattam/pintless/blob/main/pintless/unit.py#L303">303</a></td></tr><tr><td><b>TOTAL</b></td><td><b>455</b></td><td><b>64</b></td><td><b>86%</b></td><td>&nbsp;</td></tr></tbody></table></details>
<!-- Pytest Coverage Comment:End -->

---

The unit library [pint](https://github.com/hgrecco/pint) is fantastic.  It removes a whole class of bugs from common data science workloads, and provides good tools for humans to process numbers.  But it's very slow, and provides vast swaths of functionality that I don't need.

This library is like pint, but _less_ --- it lets you use units without pain, but aims to be performant and small-in-memory.  It's designed as a drop-in replacement to pint for those of us who don't use most of pint's features.

Choice of features is based on my personal experience in projects.  From this I've developed some principles that will be followed here to prevent creep/bloat:

Things this doesn't support:

 - Units that don't scale from 0, e.g. degrees C and F
 - LaTeX output
 - Translation to other languages --- want different units?  Use a different definition file
 - Simplification of units: algebraic simplifications are necessary, but choosing 'sensible' units for humans is beyond the scope of this lib
 - Scientific notation and other non-unit number representation problems.  Pintless attempts to touch the values as little as possible.
 - Numpy/pandas support

Design Principles

 - Fast is more important than small or simple
 - Precompute where possible
 - Having principles usually leads you to design for them rather than reality: design based on benchmarks
 - Don't incur performance costs for obscure units or use-cases: allow users to specify minimal sets of things for common workflows
 - Don't incur performance costs for nicer APIs that are only useful in interactive workflows (e.g. string processing, output to notebooks, etc)
 - Quantity and Unit classes are numbers and should be as transparent/minimal as possible, holding as few external references as possible, and should be serialisable with as little pain as possible


## Road Map

 - Better test pack
 - Better benchmarks, and performance testing in CI
 - Compilation of parts of the library to C


## Performance
At the time of writing, pintless is roughly 20 times faster than pint.  One of the roadmap actions above is to estabilish a much better benchmarking process for this figure, though, so take it with a grain of salt for now.

## Benchmarking
A small benchmark script is in the root of this repository, `benchmark.py`.  To run (and visualise the output using [snakeviz](https://jiffyclub.github.io/snakeviz/):

    python -m cProfile -o both.prof benchmark.py
    snakeviz both.prof

The benchmark is dead simple, and prioritises repeated simple actions (as per a lot of processing workloads).
